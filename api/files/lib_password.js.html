<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/password.js - caesar-salad</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="http://www.gravatar.com/avatar/8b96e2b55dc11487e365abf84a36b0e1?s=16">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://www.gravatar.com/avatar/8b96e2b55dc11487e365abf84a36b0e1?s=52" title="caesar-salad">caesar-salad</h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: v0.1.5</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Caesar.html">Caesar</a></li>
            
                <li><a href="../classes/CaesarSalad.html">CaesarSalad</a></li>
            
                <li><a href="../classes/Password.html">Password</a></li>
            
                <li><a href="../classes/ROT13.html">ROT13</a></li>
            
                <li><a href="../classes/ROT18.html">ROT18</a></li>
            
                <li><a href="../classes/ROT47.html">ROT47</a></li>
            
                <li><a href="../classes/ROT5.html">ROT5</a></li>
            
                <li><a href="../classes/SubstitutionCipher.html">SubstitutionCipher</a></li>
            
                <li><a href="../classes/Vigenere.html">Vigenere</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/caesar-salad.html">caesar-salad</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: lib/password.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import &#x27;./polyfills&#x27;; // Number.isInteger

function ShiftMixin() {
  this.shift = function() {
    return this.shiftArray()[0];
  };

  this.shiftArray = function() {
    var passwd = this.getPassword(),
        forDecryption = this.symbols.indexOf(&#x27;forDecryption&#x27;) + 1;

    passwd = passwd.map(function (num) {
      if (forDecryption) {
        return (26 - num) % 26;
      } else {
        return num % 26;
      }
    });
    if (passwd.length === 0) {
      return [0];
    }
    return passwd;
  };
}

function passwordToShiftArray(passwd) {
  if (typeof passwd === &#x27;undefined&#x27; || passwd === null) {
    return [0];
  } else if (Number.isInteger(passwd)) {
    return [passwd];
  } else if (typeof passwd === &#x27;string&#x27; &amp;&amp;
              /^[-+]?[0-9]+(,[-+]?[0-9]+)*$/.test(passwd)) {
    return passwd.split(&#x27;,&#x27;).map(Number);
  } else if (typeof passwd === &#x27;string&#x27; &amp;&amp;
              /^[A-Za-z]*$/.test(passwd)) {
    return passwd.toLowerCase().split(&#x27;&#x27;).map(function(c) {
      return c.charCodeAt(0) - 97;
    });
  } else if (passwd &amp;&amp; passwd.every &amp;&amp; passwd.every(Number.isInteger)) {
    return passwd.slice();
  } else {
    throw new RangeError(&#x27;Unable to parse password: &#x27; + passwd);
  }
}


// start state: password
var dfa = {
  &#x27;password&#x27;: [&#x27;to&#x27;, &#x27;forDecryption&#x27;],
  &#x27;to&#x27;: [],
  &#x27;forDecryption&#x27;: [&#x27;to&#x27;]
};

// start state: password
var mixins = {
  &#x27;to&#x27;: [ShiftMixin]
};

class Password {
  /**
   * Handles password parsing for {{#crossLink &quot;Caesar&quot;}}{{/crossLink}} and {{#crossLink &quot;Vigenere&quot;}}{{/crossLink}}.
   *
   * &#x60;Password&#x60; is a {{#ext &quot;Builder&quot; &quot;en.wikipedia.org/wiki/Builder_pattern&quot;}}{{/ext}} with a {{#ext &quot;Fluent Interface&quot; &quot;en.wikipedia.org/wiki/Fluent_interface&quot;}}{{/ext}} providing the following methods:
   *
   * &lt;span style=&quot;font-family:monospace&quot;&gt;
   *   â„’&lt;sub&gt;&lt;span style=&quot;font-family:cursive&quot;&gt;passwd&lt;/span&gt;&lt;/sub&gt; := {&lt;br/&gt;
   *   &amp;nbsp;&amp;nbsp;new Password(&lt;span style=&quot;font-family:cursive&quot;&gt;passwd&lt;/span&gt;).to.shift(),&lt;br/&gt;
   *   &amp;nbsp;&amp;nbsp;new Password(&lt;span style=&quot;font-family:cursive&quot;&gt;passwd&lt;/span&gt;).to.shiftArray(),&lt;br/&gt;
   *   &amp;nbsp;&amp;nbsp;new Password(&lt;span style=&quot;font-family:cursive&quot;&gt;passwd&lt;/span&gt;).forDecryption.to.shift(),&lt;br/&gt;
   *   &amp;nbsp;&amp;nbsp;new Password(&lt;span style=&quot;font-family:cursive&quot;&gt;passwd&lt;/span&gt;).forDecryption.to.shiftArray()&lt;br/&gt;
   *   }&lt;/span&gt; (for all valid &lt;span style=&quot;font-family:cursive&quot;&gt;passwd&lt;/span&gt;)
   *
   * Valid password formats:
   *
   *     new Password( 1  ).to.shift() // returns: 1
   *     new Password(&#x27;1&#x27; ).to.shift() // returns: 1
   *     new Password(&#x27;-1&#x27;).to.shift() // returns: -1
   *     new Password(&#x27;b&#x27; ).to.shift() // returns: 1
   *     new Password(&#x27;bc&#x27;).to.shift() // returns: 1
   *
   *     new Password( 1    ).to.shiftArray() // returns: [1]
   *     new Password([1, 2]).to.shiftArray() // returns: [1, 2]
   *     new Password(&#x27;1, 2&#x27;).to.shiftArray() // returns: [1, 2]
   *     new Password(&#x27;1,-2&#x27;).to.shiftArray() // returns: [1, -2]
   *     new Password(&#x27;bc&#x27;  ).to.shiftArray() // returns: [1, 2]
   *
   * @class Password
   * @constructor
   * @param passwd {Number|String|[Number]} The password to parse.
   */
  constructor(passwd, symbol, parent) {
    if (!symbol) {
      symbol = &#x27;password&#x27;;
    }
    var children = dfa[symbol],
        i,
        len;

    if (parent instanceof Password) {
      this.symbols = parent.symbols.slice();
      this.getPassword = parent.getPassword;
    } else {
      this.symbols = [];
      passwd = passwordToShiftArray(passwd);
      this.getPassword = function() {
        return passwd;
      };
    }

    this.symbols.push(symbol);

    // mixins
    if (mixins[symbol]) {
      for (i = 0, len = mixins[symbol].length; i &lt; len; i++) {
        mixins[symbol][i].call(this);
      }
    }

    // create children
    for (i = 0; i &lt; children.length; i++) {
      this[children[i]] = new Password(null, children[i], this);
    }
  }
}

// ES6-CommonJs interop:
Password[&#x27;default&#x27;] = Password;

export default Password;

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
